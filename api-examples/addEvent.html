<div id="content_area">
    <div id="cc-m-12904045734" class="j-module n j-formnew">
        <form action="" method="post" id="cc-m-form-12904045734" class="cc-m-form cc-m-form-layout-0" name="cc-m-form-12904045734">
            <div class="cc-m-form-loading">
            </div>

            <div class="cc-m-form-view-sortable">
                <div class="cc-m-form-view-element cc-m-form-text cc-m-required" data-action="element">
                    <div>
                        <label for="name">Name</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="text" name="name" value="" id="name" style="width: 50%;" />
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-email cc-m-required" data-action="element">
                    <div>
                        <label for="email">E-Mail</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="email" autocorrect="off" autocapitalize="off" name="email" value="" required="" style="width: 50%;" id="email" />
                    </div>
                </div>


                <div class="cc-m-form-view-element cc-m-form-text" data-action="element">
                    <div>
                        <label for="phone">Telefon</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="text" name="phone" value="" id="phone" style="width: 50%;" />
                    </div>
                </div>

                  <div class="cc-m-form-view-element cc-m-form-text" data-action="element">
                    <div>
                        <label for="organizerName">Firma / Verein</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="text" name="organizerName" value="" id="organizerName" style="width: 50%;" />
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-text" data-action="element">
                    <div>
                        <label for="website">Webseite</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="text" name="website" value="" id="website" style="width: 50%;" />
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-text cc-m-required" data-action="element">
                    <div>
                        <label for="eventName">Name der Veranstaltung</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="text" name="eventName" value="" id="eventName" style="width: 50%;" />
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-calendar" data-action="element">
                    <div>
                        <label for="eventDate">Datum der Veranstaltung</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <input type="date" name="eventDate" value="" style="width: 50%;" id="eventDate" />
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-text" data-action="element">
                    <div style="width: 50%">
                        <div>
                            <label for="zipAndCity">PLZ und Ort</label>
                        </div>

                        <div class="cc-m-form-view-input-wrapper">
                            <input type="text" name="zip" value="" id="zip" style="width: 20%" /> <input type="text" name="city" value="" id="city" style="width: 79%" />
                        </div>
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-select" data-action="element">
                    <div>
                        <label for="pax">Erwartete Besucher</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <select name="pax" class="cc-m-form-element-input" id="pax">
                            <option value="zwischen 50 und 200">
                                zwischen 50 und 200
                            </option>
                            <option value="zwischen 200 und 500">
                                zwischen 200 und 500
                            </option>
                            <option value="zwischen 500 und 1000">
                                zwischen 500 und 1000
                            </option>
                            <option value="zwischen 1000 und 2000">
                                zwischen 1000 und 2000
                            </option>
                            <option value="über 2000">
                                über 2000
                            </option>
                        </select>
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-select" data-action="element">
                    <div>
                        <label for="location">Location</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <select name="location" class="cc-m-form-element-input" id="location">
                            <option value="Halle">
                                Halle
                            </option>
                            <option value="Zelt">
                                Zelt
                            </option>
                            <option value="Open Air">
                                Open Air
                            </option>
                        </select>
                    </div>
                </div>

                <div class="cc-m-form-view-element cc-m-form-textarea cc-m-required" data-action="element">
                    <div>
                        <label for="message">Nachricht</label>
                    </div>

                    <div class="cc-m-form-view-input-wrapper">
                        <textarea name="message" rows="6" style="width: 100%;" id="message"></textarea>
                    </div>
                </div>
            </div>

            <div class="cc-m-form-view-element cc-m-form-submit" data-action="element">
                <div class="cc-m-form-view-input-wrapper">
                    <div>
                        <input id="m6131b75907698581_dataprivacy" type="checkbox" name="dataprivacy" data-error-message="Bitte der Datenschutzerklärung zustimmen." required="" /> <label for=
                        "m6131b75907698581_dataprivacy">Es gilt die <a href="/j/privacy" target="_blank">Datenschutzerklärung</a>.</label>
                    </div>
                    <!-- <input type="submit" value="absenden" data-action="formButton" /> -->
                    <input type="submit" onclick="postEventRequest()" name="Submit"></button>
                </div>
            </div>

            <p class="cc-m-form-note">
                <strong>Hinweis:</strong> Bitte die mit <span class="j-m-required">*</span> gekennzeichneten Felder ausfüllen.
            </p>
        </form>
    </div>
</div>
<script>
/* <![CDATA[ */
    function postEventRequest() {

      var xhr = new XMLHttpRequest();
      xhr.withCredentials = false;

      xhr.addEventListener("readystatechange", function() {
        if (this.readyState === 4) {
          if (xhr.status >= 200 && xhr.status < 400) {

            var response = JSON.parse(xhr.responseText);
            renderResponse(response);

          } else {
            renderError(xhr.status);
          }
        }
      });

      xhr.open("POST", "http://localhost:3000/api/events");
      xhr.setRequestHeader("apikey", "$2a$08$80xkMBwuEwte512V2LONXelPkDUMO3uefkz.5SA83kFFSJtmJfBbe");
      //xhr.open("POST", "https://www.gigeasy.de/api/events");
      //xhr.setRequestHeader("apikey", "$2a$08$QOs4Cgx503HV7U7uDOD4Wef09ik1JU/YrjlK/NJ9gUw9tY0ihMEHy");
      xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

      const body = {
        "contactName": document.getElementById('name').value,
        "contactEmail": document.getElementById('email').value,
        "contactPhone": document.getElementById('phone').value,
        "organizerName": document.getElementById('organizerName').value,
        "organizerWebsite": document.getElementById('website').value,
        "eventDate": document.getElementById('eventDate').value,
        "eventName": document.getElementById('eventName').value,
        "eventZip": document.getElementById('zip').value,
        "eventCity": document.getElementById('city').value,
        "eventLocation": document.getElementById('location').value,
        "message": document.getElementById('message').value,
        "bandtype": "TETs"
      };

      xhr.send(JSON.stringify(body));
    }

    function renderResponse(response) {

      var para = document.createElement("p");
      var node = document.createTextNode("Nachricht erfolgreich versendet: " + response);
      para.appendChild(node);

      var element = document.getElementById("content_area");
      element.appendChild(para);
    }


    function renderError(status) {

      var para = document.createElement("p");
      var node = document.createTextNode("Fehler beim Senden der Nachricht. Statuscode: " + status);
      para.appendChild(node);

      var element = document.getElementById("content_area");
      element.appendChild(para);
    }
/*]]>*/
</script>
